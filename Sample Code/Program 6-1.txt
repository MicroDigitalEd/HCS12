MYRAM		EQU $860	
COUNTREG	EQU $820	
CNTVAL	EQU 4		
CNTVAL1	EQU 5		
				
	LDS	#$900			
	JSR	COPY_DATA
	JSR	CAL_CHKSUM
	JSR	TEST_CHKSUM
	BRA	$
COPY_DATA
	LDX	 #MYBYTE	
	LDY	 #MYRAM	
	LDAA	 #CNTVAL
	STAA	 COUNTREG 
B5	LDAA	 1,X+	 
	STAA	 1,Y+		
	DEC	 COUNTREG
	BNE	 B5 		
	RTS			
CAL_CHKSUM
	LDAA	 #CNTVAL		
	STAA	 COUNTREG	
	LDX	 #MYRAM	
	CLRA			
B2	ADDA	 1,X+ 	
	DEC	 COUNTREG	
	BNE 	 B2		
	NEGA			
	STAA	 0,X		
	RTS			
TEST_CHKSUM
	BSET	 DDRB,%11111111		
	LDAA	 #CNTVAL+1	
	STAA	 COUNTREG	
	LDX	 #MYRAM	
	CLRA			
B3	ADDA	 1,X+ 	
	DEC	 COUNTREG	
	BNE 	 B3		
	CMPA	 #0		
	BEQ	 G_1		
	LDAA	 #'B'		
	STAA	 PORTB		
	RTS
G_1	LDAA	 #'G'		
	STAA	 PORTB		
	RTS
	ORG $8500
MYBYTE FCB $25, $62, $3F, $52, $00
	END
