CHAR  DC.B 1
	ORG   ROMStart
Entry:
 	LDS	#RAMEnd+1 
	LDAA #$FF		
	STAA	DDRB		
	LDAA #$00		
	STAA	DDRA		
	JSR	SCI0_INIT 
	JSR	TC7_INIT  
	LDAA	#$D6		
	STAA	HPRIO
	CLI			
H1	LDAA	PORTA	
	STAA	PORTB	
	BRA	H1		
SCI0_INIT
  	LDAA	#$0		
	STAA	SCI0BDH	
	LDAA	#$0D		
	STAA	SCI0BDL  	
	LDAA	#0	   	
	STAA	SCI0CR1	
	LDAA	#$AC	
	STAA	SCI0CR2	
	RTS
TC7_INIT
	LDAA	#$80		
	STAA	TSCR1	
	LDAA	#$04		
	STAA	TSCR2	
	BSET	TIOS,%10000000	
	LDAA	#$40			
	STAA	TCTL1	
	LDAA #$80			
	STAA	TIE		
  	RTS
SCI0_ISR
	BRCLR SCI0SR1,mSCI0SR1_TDRE,RCV 
	LDAA CHAR 	
	STAA SCI0DRL
RCV	BRCLR SCI0SR1,mSCI0SR1_RDRF,EXIT 
	LDAA SCI0DRL
	STAA CHAR 	
EXIT	RTI				
TC7_ISR
	LDD	TCNT		
	ADDD	#62500	
	STD	TC7		
	BSET	TFLG1,%10000000	
	RTI			
	ORG   $FFD6
    	DC.W  SCI0_ISR	
	ORG   $FFE0
    	DC.W  TC7_ISR	
	ORG   $FFFE
    	DC.W  Entry	
